<div class="container">
    <div style="width: 100%;">
        <mat-card class="example-card">
            <mat-card-header class="center">
                <h1>{{"REGISTER.TITLE" | translate }}</h1>
            </mat-card-header>
            <mat-card-content>
            <hr>
            <mat-stepper orientation="vertical" [linear]="isLinear" #stepper>
                <mat-step [stepControl]="firstFormGroup" label="Rol">
                  <form [formGroup]="firstFormGroup">
                    <!--ROL-->
                    <mat-form-field appearance="fill" class="example-full-width">
                        <mat-label>{{"REGISTER.ROL" | translate }}</mat-label>
                        <mat-select formControlName="rol">
                          <mat-option value="Docente">Docente</mat-option>
                          <mat-option value="Estudiante">Estudiante</mat-option>
                        </mat-select>
                        <mat-error *ngIf="firstFormGroup.get('rol')?.hasError('required') && firstFormGroup.get('rol')?.touched">
                          Rol Requerido
                        </mat-error>
                      </mat-form-field>
                    <div>
                      <button mat-button matStepperNext style="margin-bottom: 0px;">Next</button>
                    </div>
                  </form>
                </mat-step>

                <mat-step [stepControl]="secondFormGroup" label="Informacion General">
                    <form [formGroup]="secondFormGroup">
                        <!--Nombre-->
                        <mat-form-field class="example-full-width" style="margin-bottom: 0px;">
                            <mat-label>{{"REGISTER.NAME" | translate }}</mat-label>
                            <input matInput type="text" formControlName="nombre" required>
                            <mat-icon matSuffix>person</mat-icon>
                            <mat-error *ngIf="secondFormGroup.get('nombre')?.hasError('required') && secondFormGroup.get('nombre')?.touched">
                                Nombre Requerido
                            </mat-error>
                        </mat-form-field>
                        <!--Apellido-->
                        <mat-form-field class="example-full-width" style="margin-bottom: 0px;">
                          <mat-label>{{"REGISTER.LASTNAME" | translate }}</mat-label>
                          <input matInput type="text" formControlName="apellido" required>
                          <mat-icon matSuffix>person</mat-icon>
                          <mat-error *ngIf="secondFormGroup.get('apellido')?.hasError('required') && secondFormGroup.get('apellido')?.touched">
                              Apellido Requerido
                          </mat-error>
                        </mat-form-field>
                        <!--AVATAR-->
                        <mat-form-field class="example-full-width" style="margin-bottom: 0px;">
                          <mat-label>AVATAR</mat-label>
                          <input matInput type="text" formControlName="avatar" required>
                          <mat-icon matSuffix>person</mat-icon>
                          <mat-error *ngIf="secondFormGroup.get('avatar')?.hasError('required') && secondFormGroup.get('avatar')?.touched">
                              Avatar Requerido
                          </mat-error>
                        </mat-form-field>
                        <!--SEXO-->
                        <table class="example-full-width" cellspacing="0"><tr>
                          <td><mat-form-field appearance="fill">
                            <mat-label>{{"REGISTER.SEX" | translate }}</mat-label>
                            <mat-select formControlName="sexo">
                              <mat-option value="Femenino">Femenino</mat-option>
                              <mat-option value="Masculino">Masculino</mat-option>
                              <mat-option value="Otro">Otro</mat-option>
                            </mat-select>
                            <mat-error *ngIf="secondFormGroup.get('sexo')?.hasError('required') && secondFormGroup.get('sexo')?.touched">
                              Sexo Requerido
                            </mat-error>
                          </mat-form-field></td>
                          <!--EMAIL-->
                          <td><mat-form-field class="example-full-width" style="margin-bottom: 0px;">
                            <mat-label>{{"REGISTER.EMAIL" | translate }}</mat-label>
                            <input matInput type="email" formControlName="correo" required>
                            <mat-icon matSuffix>person</mat-icon>
                            <mat-error *ngIf="secondFormGroup.get('correo')?.hasError('email')">
                              Please enter a valid email address
                            </mat-error>
                            <mat-error *ngIf="secondFormGroup.get('correo')?.hasError('required') && secondFormGroup.get('email')?.touched">
                              Email Requerido
                            </mat-error>
                            </mat-form-field>
                        </tr></table>
                        <!--PAIS-->
                        <mat-form-field appearance="fill" class="example-full-width">
                          <mat-label>{{"REGISTER.COUNTRY" | translate }}</mat-label>
                          <mat-select formControlName="pais">
                            <mat-option value="1">Colombia</mat-option>
                            <mat-option value="2">Peru</mat-option>
                          </mat-select>
                          <mat-error *ngIf="secondFormGroup.get('pais')?.hasError('required') && secondFormGroup.get('pais')?.touched">
                            Pais Requerido
                          </mat-error>
                        </mat-form-field>
                      <div>
                        <button mat-button matStepperNext>Next</button>
                      </div>
                    </form>
                </mat-step>
                <mat-step [stepControl]="thirdFormGroup" label="Informacion Academica">
                  <form [formGroup]="thirdFormGroup">
                    <!--INSITUCION-->
                    <mat-form-field appearance="fill" class="example-full-width">
                        <mat-label>{{"REGISTER.INSTITUTION" | translate }}</mat-label>
                        <mat-select formControlName="institucion">
                          <mat-option value="Docente">Docente</mat-option>
                          <mat-option value="Estudiante">Estudiante</mat-option>
                        </mat-select>
                        <mat-error *ngIf="thirdFormGroup.get('institucion')?.hasError('required') && thirdFormGroup.get('institucion')?.touched">
                          Institucion requerida
                        </mat-error>
                    </mat-form-field>
                    <!--PROGRAMA-->
                    <mat-form-field appearance="fill" class="example-full-width" *ngIf="firstFormGroup.get('rol')?.value === 'Estudiante'">
                      <mat-label>{{"REGISTER.PROGRAM" | translate }}</mat-label>
                      <mat-select formControlName="programa" required>
                        <mat-option value="Docente">Docente</mat-option>
                        <mat-option value="Estudiante">Estudiante</mat-option>
                      </mat-select>
                      <mat-error *ngIf="thirdFormGroup.get('programa')?.hasError('required') && thirdFormGroup.get('programa')?.touched">
                        Programa Requerido
                      </mat-error>
                  </mat-form-field>
                    <div>
                      <button mat-button matStepperNext style="margin-bottom: 0px;">Next</button>
                    </div>
                  </form>
                </mat-step>
                <mat-step [stepControl]="fourFormGroup" label="Inicio de sesion">
                    <form [formGroup]="fourFormGroup" (ngSubmit)=registrarUsuario()>
                        <!--Usuario-->
                        <mat-form-field class="example-full-width" style="margin-bottom: 0px;">
                            <mat-label>{{"REGISTER.USER" | translate }}</mat-label>
                            <input matInput type="text" formControlName="usuario" required>
                            <mat-icon matSuffix>person</mat-icon>
                            <mat-error *ngIf="fourFormGroup.get('usuario')?.hasError('required') && fourFormGroup.get('usuario')?.touched">
                                Usuario Requerido
                            </mat-error>
                        </mat-form-field>
                        <!--Pass-->
                        <mat-form-field class="example-full-width" style="margin-bottom: 0px;">
                          <mat-label>{{"REGISTER.PASS" | translate }}</mat-label>
                          <input matInput [type]="hide ? 'password' : 'text'" formControlName="password">
                          <button mat-icon-button matSuffix (click)="hide = !hide" type="button">
                            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                          </button>
                          <mat-error *ngIf="fourFormGroup.get('password')?.hasError('minlength') && fourFormGroup.get('password')?.touched">
                            Contraseña 8 Cartacteres
                          </mat-error>
                          <mat-error *ngIf="fourFormGroup.get('password')?.hasError('required') && fourFormGroup.get('password')?.touched">
                              Contraseña Requerida
                          </mat-error>
                        </mat-form-field>
                        <mat-checkbox class="example-margin" style="margin-bottom: 10px;" color="primary" formControlName="politica">
                          <span>Aceptar politica de tratamiento de datos personales</span>
                        </mat-checkbox>
                        <mat-error *ngIf="!fourFormGroup.get('politica')?.value && fourFormGroup.get('politica')?.touched" style="margin-bottom: 10px;">
                          Es obligatorio aceptar la politica para registrarte
                        </mat-error>
                        <button mat-flat-button color="primary" class="example-full-width" type="submit" [disabled]=" fourFormGroup.invalid">
                          {{"REGISTER.SEND" | translate }} 
                          <mat-icon>send</mat-icon>
                        </button>
                    </form>
                </mat-step>

            </mat-stepper>
            <app-loading *ngIf="loading"></app-loading>
            </mat-card-content>
        </mat-card>
    </div>
</div>
